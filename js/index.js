(()=>{"use strict";var e={323:(e,t,n)=>{n.d(t,{d:()=>i,p:()=>s});const o=document.getElementsByClassName("custom-select");for(let e=0;e<o.length;e++){const t=undefined;i(o[e])}function s(e,t,n){t.textContent=n.textContent.trim(),e.classList.remove("_active"),e.dataset.value=n.querySelector("input").value}function r(){for(let e of document.querySelectorAll(".custom-select._active"))e.classList.remove("_active"),e.querySelector("button").ariaExpanded="false";document.getElementById("custom-select-shadow-heigth").innerHTML=""}function i(e){const t=e.querySelector(".custom-select__button"),n=t.querySelector(".custom-select__selected-value");t.onclick=function(){const n=e.classList.contains("_active");r(),n||(t.ariaExpanded="true",e.classList.add("_active"),document.getElementById("custom-select-shadow-heigth").innerHTML=`.custom-select::before {height: ${e.scrollHeight}px}`)};for(let t of e.getElementsByTagName("li"))t.onclick=function(o){0===o.clientX&&0===o.clientY||s(e,n,t)}.bind(t),t.onkeyup=function(o){"Enter"===o.key&&s(e,n,t)}.bind(t)}document.documentElement.onclick=function(e){const t=e.target;t&&"string"==typeof t.className&&!t.className.includes("custom-select")&&r()}},263:(e,t,n)=>{var o=n(909),s=n(67),r=n(464);const i=document.querySelector(".editor__add-item-button");i.onclick=function(){o.X.createItem(),s.E[0].pushItem(),o.X.setMetadataInformation(s.E[0]),document.querySelector(".editor__items").append(i)},document.getElementById("save-button").onclick=function(){const e=s.E[0];e.processDOMItems(),r.o.download(e)}},291:(e,t,n)=>{n.d(t,{g:()=>i,o:()=>r});var o=n(67),s=n(909);function r(e){e.onclick=function(){const e=this.parentElement.parentElement;e.parentElement.removeChild(e),o.E[0].removeItemById(+e.id),s.X.setMetadataInformation(o.E[0])}.bind(e)}function i(e){e.onclick=function(){+this.dataset.returnable?(this.dataset.returnable="0",this.innerText="НЕ Возвращаемый",this.classList.remove("editor__button_blue"),this.classList.add("editor__button_yellow")):(this.dataset.returnable="1",this.innerText="Возвращаемый",this.classList.add("editor__button_blue"),this.classList.remove("editor__button_yellow"))}.bind(e)}},909:(e,t,n)=>{n.d(t,{X:()=>i});var o=n(323),s=n(291),r=n(67);const i={createProfessionOptions(e){const t=undefined,n=document.getElementById("sample").querySelector(".item__custom-select_profession ul");this._createDropdownOptions(e,n)},createRankOptions(e){const t=undefined,n=document.getElementById("sample").querySelector(".item__custom-select_rank ul");this._createDropdownOptions(e,n)},_createDropdownOptions(e,t){for(let n=0;n<e.length;n++){const o=e[n],s=document.createElement("input");s.type="radio",s.dataset.index=n+"";const r=document.createElement("label");r.innerText=o.name,r.prepend(s);const i=document.createElement("li");i.role="option",i.append(r),t.append(i)}},createItem(e){e=e??r.E[0].lastItemId+1;const t=document.querySelector(".editor__items"),n=undefined,i=document.getElementById("sample").cloneNode(!0);i.id=e+"",i.querySelector("ul").id="dropdown"+e,i.querySelector("button").setAttribute("aria-controls","dropdown"+e),(0,s.o)(i.querySelector(".item__remove")),(0,s.g)(i.querySelector(".item__returnable-toggle-button"));const c=i.querySelectorAll(".custom-select");for(let t=0;t<c.length;t++){const n=Math.max(t,10-t),s=c[t];s.style.zIndex=n+"",(0,o.d)(s);for(let t of s.querySelectorAll("input"))t.name=`options${e}_${n}`}return t.append(i),i},fillItemWithData(e,t,n,s,r,i,c){e.querySelector(".item__name").innerText=t,e.querySelector(".item__description").value=n,e.querySelector(".item__price").value=s+"",r&&e.querySelector(".item__returnable-toggle-button").click();const a=e.querySelector(".item__custom-select_rank"),l=a.querySelector(".custom-select__selected-value"),d=a.querySelectorAll("li")[i];(0,o.p)(a,l,d);const u=e.querySelector(".item__custom-select_profession"),m=u.querySelector(".custom-select__selected-value"),p=u.querySelectorAll("li")[c];(0,o.p)(u,m,p)},setMetadataInformation(e){document.getElementById("items-count").innerText=e.items.length+"",document.getElementById("ranks-count").innerText=e.ranks.length+"",document.getElementById("professions-count").innerText=e.professions.length+""}}},67:(e,t,n)=>{n.d(t,{E:()=>s,d:()=>o});class o{ranks;professions;lastItemId;items;constructor(e){this.ranks=e.ranks,this.professions=e.professions,this.lastItemId=e.lastItemId,this.items=e.items}pushItem(e){e=e??{id:++this.lastItemId,name:"Empty name",description:"Empty description",price:0,returnable:!1,rankIndex:0,professionIndex:0},this.items.push(e)}removeItemById(e){for(let t=0;t<this.items.length;t++){const n=undefined;if(this.items[t].id===e)return this.items.splice(t,1)[0]}}processDOMItems(){this.items=[];for(let e of document.getElementsByClassName("item"))"sample"!==e.id&&this.items.push(o.processDOMItem(e))}static processDOMItem(e){const t=e.querySelector(".item__input"),n=e.querySelector(".item__description"),o=e.querySelector(".item__price"),s=e.querySelector("button"),r=e.querySelector(".item__custom-select_rank input:checked"),i=e.querySelector(".item__custom-select_profession input:checked");return{id:+e.id,name:t.innerText,description:n.value,price:+o.value,returnable:!!+s.dataset.returnable,rankIndex:r?+r.dataset.index:0,professionIndex:i?+i.dataset.index:0}}}const s=[null]},464:(e,t,n)=>{n.d(t,{o:()=>s});var o=n(155);const s={parse:async e=>new Promise((t=>{const n=new FileReader;n.onload=function(e){const n=e.target.result.toString();t(JSON.parse(n))},n.readAsText(e)})),async download(e){const t={ranks:e.ranks,professions:e.professions,lastItemId:e.lastItemId,items:e.items,generatedBy:"app"},n=JSON.stringify(t);(0,o.R)(n,`config_patch_${Date.now()}.json`,"application/json")}}},155:(e,t,n)=>{function o(e,t,n="application/json"){const o=new Blob([e],{type:n}),s=document.createElement("a");s.style.opacity="0",s.style.position="absolute",s.href=URL.createObjectURL(o),s.download=t,document.body.appendChild(s),s.click(),setTimeout((function(){document.body.removeChild(s),URL.revokeObjectURL(s.href)}),0)}n.d(t,{R:()=>o})},231:(e,t,n)=>{var o=n(909),s=n(67),r=n(464);const i=document.querySelector("main"),c=document.querySelector(".main__section_drag-file"),a=document.querySelector(".main__section_drop-file"),l=document.querySelector(".editor");i.ondragenter=function(e){e.stopPropagation(),e.preventDefault(),"file"===e.dataTransfer?.items[0].kind&&"application/json"===e.dataTransfer.items[0].type&&l.classList.contains("_hide")&&(c.classList.add("_hide"),a.classList.remove("_hide"))},i.ondragleave=function(e){e.stopPropagation(),e.preventDefault(),l.classList.contains("_hide")&&(c.classList.remove("_hide"),a.classList.add("_hide"))},i.ondragover=function(e){e.stopPropagation(),e.preventDefault()},i.ondrop=function(e){e.stopPropagation(),e.preventDefault(),l.classList.contains("_hide")&&(c.classList.add("_hide"),a.classList.add("_hide"),l.classList.remove("_hide"),r.o.parse(e.dataTransfer.files[0]).then((e=>{s.E[0]=new s.d(e),"app"===e.generatedBy&&alert("Этот файл был сгенерирован этим приложением. Рекомендуется открывать только файлы, сгенерированные ботом. Это оповещение может быть проигнорированно."),o.X.createRankOptions(e.ranks),o.X.createProfessionOptions(e.professions),o.X.setMetadataInformation(e);for(let t of e.items){const e=o.X.createItem(t.id);o.X.fillItemWithData(e,t.name,t.description,t.price,t.returnable,t.rankIndex,t.professionIndex)}const t=document.querySelector(".editor__add-item-button");document.querySelector(".editor__items").append(t)})))}}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(263),n(323),n(291),n(909),n(155),n(67),n(464);var o=n(231)})();